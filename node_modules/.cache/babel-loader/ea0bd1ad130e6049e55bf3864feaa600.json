{"ast":null,"code":"import { useCallback, useState } from \"react\";\nimport useOnBlock from \"./OnBlock\";\nimport usePoller from \"./Poller\";\n/*\n  ~ What it does? ~\n\n  Gets your balance in ETH from given address and provider\n\n  ~ How can I use? ~\n\n  const yourLocalBalance = useBalance(localProvider, address);\n\n  ~ Features ~\n\n  - Provide address and get balance corresponding to given address\n  - Change provider to access balance on different chains (ex. mainnetProvider)\n  - If no pollTime is passed, the balance will update on every new block\n*/\n\nconst DEBUG = false;\nexport default function useBalance(provider, address, pollTime = 0) {\n  const [balance, setBalance] = useState();\n  const pollBalance = useCallback(async (provider, address) => {\n    if (provider && address) {\n      const newBalance = await provider.getBalance(address);\n\n      if (newBalance !== balance) {\n        setBalance(newBalance);\n      }\n    }\n  }, [provider, address]); // Only pass a provider to watch on a block if there is no pollTime\n\n  useOnBlock(pollTime === 0 && provider, () => {\n    if (provider && address && pollTime === 0) {\n      pollBalance(provider, address);\n    }\n  }); // Use a poller if a pollTime is provided\n\n  usePoller(async () => {\n    if (provider && address && pollTime > 0) {\n      if (DEBUG) console.log(\"polling!\", address);\n      pollBalance();\n    }\n  }, pollTime, provider && address);\n  return balance;\n}","map":{"version":3,"sources":["/Users/yuzucchi/Documents/operations/nft/scaffold-eth/packages/react-app/src/hooks/Balance.js"],"names":["useCallback","useState","useOnBlock","usePoller","DEBUG","useBalance","provider","address","pollTime","balance","setBalance","pollBalance","newBalance","getBalance","console","log"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;AACA,OAAOC,UAAP,MAAuB,WAAvB;AACA,OAAOC,SAAP,MAAsB,UAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,KAAK,GAAG,KAAd;AAEA,eAAe,SAASC,UAAT,CAAoBC,QAApB,EAA8BC,OAA9B,EAAuCC,QAAQ,GAAG,CAAlD,EAAqD;AAClE,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,EAAtC;AAEA,QAAMU,WAAW,GAAGX,WAAW,CAC7B,OAAOM,QAAP,EAAiBC,OAAjB,KAA6B;AAC3B,QAAID,QAAQ,IAAIC,OAAhB,EAAyB;AACvB,YAAMK,UAAU,GAAG,MAAMN,QAAQ,CAACO,UAAT,CAAoBN,OAApB,CAAzB;;AACA,UAAIK,UAAU,KAAKH,OAAnB,EAA4B;AAC1BC,QAAAA,UAAU,CAACE,UAAD,CAAV;AACD;AACF;AACF,GAR4B,EAS7B,CAACN,QAAD,EAAWC,OAAX,CAT6B,CAA/B,CAHkE,CAelE;;AACAL,EAAAA,UAAU,CAACM,QAAQ,KAAK,CAAb,IAAkBF,QAAnB,EAA6B,MAAM;AAC3C,QAAIA,QAAQ,IAAIC,OAAZ,IAAuBC,QAAQ,KAAK,CAAxC,EAA2C;AACzCG,MAAAA,WAAW,CAACL,QAAD,EAAWC,OAAX,CAAX;AACD;AACF,GAJS,CAAV,CAhBkE,CAsBlE;;AACAJ,EAAAA,SAAS,CACP,YAAY;AACV,QAAIG,QAAQ,IAAIC,OAAZ,IAAuBC,QAAQ,GAAG,CAAtC,EAAyC;AACvC,UAAIJ,KAAJ,EAAWU,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBR,OAAxB;AACXI,MAAAA,WAAW;AACZ;AACF,GANM,EAOPH,QAPO,EAQPF,QAAQ,IAAIC,OARL,CAAT;AAWA,SAAOE,OAAP;AACD","sourcesContent":["import { useCallback, useState } from \"react\";\nimport useOnBlock from \"./OnBlock\";\nimport usePoller from \"./Poller\";\n\n/*\n  ~ What it does? ~\n\n  Gets your balance in ETH from given address and provider\n\n  ~ How can I use? ~\n\n  const yourLocalBalance = useBalance(localProvider, address);\n\n  ~ Features ~\n\n  - Provide address and get balance corresponding to given address\n  - Change provider to access balance on different chains (ex. mainnetProvider)\n  - If no pollTime is passed, the balance will update on every new block\n*/\n\nconst DEBUG = false;\n\nexport default function useBalance(provider, address, pollTime = 0) {\n  const [balance, setBalance] = useState();\n\n  const pollBalance = useCallback(\n    async (provider, address) => {\n      if (provider && address) {\n        const newBalance = await provider.getBalance(address);\n        if (newBalance !== balance) {\n          setBalance(newBalance);\n        }\n      }\n    },\n    [provider, address],\n  );\n\n  // Only pass a provider to watch on a block if there is no pollTime\n  useOnBlock(pollTime === 0 && provider, () => {\n    if (provider && address && pollTime === 0) {\n      pollBalance(provider, address);\n    }\n  });\n\n  // Use a poller if a pollTime is provided\n  usePoller(\n    async () => {\n      if (provider && address && pollTime > 0) {\n        if (DEBUG) console.log(\"polling!\", address);\n        pollBalance();\n      }\n    },\n    pollTime,\n    provider && address,\n  );\n\n  return balance;\n}\n"]},"metadata":{},"sourceType":"module"}